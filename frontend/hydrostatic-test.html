<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hydrostatic Test Report</title>
  <script src="common.js"></script>
  <style>
      /* Hide dropdowns only when printing or generating PDF */
  @media print {
    select {
      display: none !important;
    }
    /* If you want to keep the selected text visible instead of the box disappearing */
    select::after {
      content: attr(value);
      display: inline;
    }
  }
 body {
    font-family: Arial, sans-serif;
    margin: 40px;
    background: #f9f9f9;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 5px;
    font-size: 24px;
    font-weight: bold;
    background: #fff9c4;
    padding: 10px;
    border: 1px solid #ccc;
    display: block;
    width: 100%;
  }
  h2 {
    text-align: center;
    margin-bottom: 20px;
  }
  .header-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-weight: bold;
  }
  .header-row input {
    background: #fff9c4;
    border: 1px solid #ccc;
    padding: 2px 5px;
    width: 150px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
  }
  th, td {
    border: 1px solid #000;
    padding: 8px 10px;
    text-align: left;
    vertical-align: top;
  }
  input, textarea {
    width: 100%;
    padding: 6px;
    box-sizing: border-box;
    background: #fff9c4;
    border: 1px solid #ccc;
  }
  textarea {
    resize: vertical;
  }
  .btn {
    display: inline-block;
    background: #007BFF;
    color: #fff;
    padding: 10px 20px;
    text-decoration: none;
    border: none;
    border-radius: 4px;
    margin: 10px 5px 0 0;
    cursor: pointer;
  }
  .btn:hover {
    background: #0056b3;
  }
  .footer td {
    height: 60px;
  }

  /* ‚úÖ Combined Print Styling */
@media print {
    @page {
      size: A4 portrait;
      margin: 10mm; /* Reduced margins to fit more content */
    }

    body {
      margin: 0;
      padding: 0;
      background: #fff !important;
      color: #000;
      transform: scale(0.95); /* Slightly shrink content */
      transform-origin: top left;
    }

    .container {
      max-width: 190mm; /* Keep within printable area */
      margin: auto;
    }

    table, th, td {
      font-size: 12px; /* Slightly smaller font for fitting */
    }

    h1 {
      font-size: 20px;
    }

    h2 {
      font-size: 14px;
    }

    /* Prevent table rows from breaking across pages */
    table, tr, td, th {
      page-break-inside: avoid !important;
    }
  }
  </style>
</head>
<body>

<div class="container">
  <!-- Company Logo & Name Selection -->
  <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
    
    <!-- Logo Dropdown -->
    <div style="display:flex; flex-direction:column; align-items:center; margin-right: 10px;">
      <img id="companyLogo" src="logo1.jpg" alt="Company Logo" style="height: 60px; width: auto; margin-bottom: 5px;" />
      <select id="logoSelect" onchange="updateFromLogo()">
        <option value="logo.jpg">Volta Engineering Designs Pvt. Ltd.</option>
        <option value="volta green.png">Volta Green Structures</option>
        <option value="Deccan-Auto.jpg">Deccan Auto</option>
      </select>
    </div>

    <!-- Company Name Dropdown -->
    <div style="flex: 1; text-align: center;">
      <select id="companyName" onchange="updateFromName()" style="font-size:18px; font-weight:bold; color: var(--primary); width:auto;">
        <option>Volta Engineering Designs Pvt. Ltd.</option>
        <option>Volta Green Structures Pvt. Ltd.</option>
        <option>Deccan Auto Ltd.</option>
      </select>
      <h2 style="margin: 0; font-size: 16px; color: #222;">HYDROSTATIC INSPECTION REPORT</h2>
    </div>

  </div>

  <form>
    <!-- Header Info -->
    <table>
      <tr>
        <td>Client:</td>
        <td><input type="text" name="client" /></td>
        <td>Test Date:</td>
        <td><input type="date" name="test_date" /></td>
      </tr>
      <tr>
        <td>P.O. No.:</td>
        <td><input type="text" name="po_no" /></td>
        <td>Equipment Tag No.:</td>
        <td><input type="text" name="tag_no" /></td>
      </tr>
      <tr>
        <td>Drawing No.:</td>
        <td><input type="text" name="drawing_no" /></td>
        <td>Inspection Agency:</td>
        <td><input type="text" name="inspection_agency" /></td>
      </tr>
      <tr>
        <td>QAP:</td>
        <td><input type="text" name="qap" /></td>
        <td>QA Reference No.:</td>
        <td><input type="text" name="qa_ref" /></td>
      </tr>
      <tr>
        <td>QAP Clause No:</td>
        <td><input type="text" name="qap_clause" /></td>
        <td>Report No.:</td>
        <td><input type="text" name="report_no" /></td>
      </tr>
      <tr>
        <td>Date:</td>
        <td><input type="date" name="date" /></td>
        <td></td>
        <td></td>
      </tr>
    </table>

    <!-- Details of Inspection -->
    <table>
      <tr class="section-heading"><td colspan="2">Details of Inspection</td></tr>
      <tr><td>1) Test Description:</td><td><input type="text" name="test_description" /></td></tr>
      <tr><td>2) Procedure No:</td><td><input type="text" name="procedure_no" /></td></tr>
      <tr><td>3) Test Pressure (Required):</td><td><input type="text" name="test_pressure_req" /></td></tr>
      <tr><td>4) Actual Test Pressure:</td><td><input type="text" name="actual_test_pressure" /></td></tr>
      <tr><td>5) Design Pressure:</td><td><input type="text" name="design_pressure" /></td></tr>
      <tr><td>6) Test Position:</td><td><input type="text" name="test_position" /></td></tr>
      <tr><td>7) Test Water:</td><td><input type="text" name="test_water" /></td></tr>
      <tr><td>8) Chloride Content:</td><td><input type="text" name="chloride_content" /></td></tr>
      <tr><td>9) Test Pressure Holding Duration:</td><td><input type="text" name="pressure_duration" /></td></tr>
      <tr><td>10) Test Temperature:</td><td><input type="text" name="test_temperature" /></td></tr>
    </table>

    <!-- Pressure Gauge Details -->
    <table>
      <tr class="section-heading"><td colspan="4">11) Pressure Gauge Details</td></tr>
      <tr>
        <th>Identification No.</th>
        <th>Range</th>
        <th>Calibration Date</th>
        <th>Calibration Due Date</th>
      </tr>
      <tr>
        <td><input type="text" name="gauge_id" /></td>
        <td><input type="text" name="gauge_range" /></td>
        <td><input type="date" name="calibration_date" /></td>
        <td><input type="date" name="calibration_due" /></td>
      </tr>
    </table>

    <!-- Observation & Result -->
    <table>
      <tr class="section-heading"><td colspan="2">12) Observation</td></tr>
      <tr><td>Drop in Pressure:</td><td><input type="text" name="drop_pressure" /></td></tr>
      <tr><td>Leakage:</td><td><input type="text" name="leakage" /></td></tr>
      <tr class="section-heading"><td colspan="2">13) Result</td></tr>
      <tr><td colspan="2"><textarea name="test_result" rows="4"></textarea></td></tr>
    </table>

    <!-- Buttons -->
    <button class="btn" type="button" onclick="addRow()">‚ûï Add Row</button>
    <button class="btn" type="button" id="btnSave">‚úÖ Save to Server</button>
    <button class="btn" type="button" onclick="window.print()">üñ®Ô∏è Print / Save</button>

    <!-- Footer -->
    <div class="footer">
      <div class="footer-item">
        <label>Inspection By</label>
        <input type="text" name="inspection_by" placeholder="Signature / Stamp" />
        <input type="text" name="inspection_name" placeholder="Name" />
        <input type="date" name="inspection_date" />
      </div>
      <div class="footer-item">
        <label>Witnessed By</label>
        <input type="text" name="witness_by" placeholder="Signature / Stamp" />
        <input type="text" name="witness_name" placeholder="Name" />
        <input type="date" name="witness_date" />
      </div>
    </div>

    <p style="text-align:right; margin-top:40px;">Page 1 of 1</p>
  </form>
</div>

<script>
const logoMap = {
  "Volta Engineering Designs Pvt. Ltd.": "logo.jpg",
  "Volta Green Structures Pvt. Ltd.": "volta green.png",
  "Deccan Auto Ltd.": "Deccan-Auto.jpg"
};

function updateFromLogo() {
  const selectedLogo = document.getElementById("logoSelect").value;
  document.getElementById("companyLogo").src = selectedLogo;
  
  // Match company name based on selected logo
  for (const [name, logo] of Object.entries(logoMap)) {
    if (logo === selectedLogo) {
      document.getElementById("companyName").value = name;
      break;
    }
  }
}

function updateFromName() {
  const selectedName = document.getElementById("companyName").value;
  const logoFile = logoMap[selectedName];
  
  document.getElementById("companyLogo").src = logoFile;
  document.getElementById("logoSelect").value = logoFile;
}
</script>

</body>
</html>
